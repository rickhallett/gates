---
version: 1.0
runtime: python311
build:
  commands:
    - python3 -m venv .venv
    - source .venv/bin/activate
    - pip3 install --upgrade pip
    - pip3 install -r requirements.txt

run:
  runtime-version: 3.11
  command: python3 restart_on_crash.py
  network:
    port: 80
  env:
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: ENVIRONMENT
      value: "production"
  secrets:
    - name: openai_key
      value-from: "arn:aws:secretsmanager:eu-west-2:195275678116:secret:openai_key-yWHBjj"
